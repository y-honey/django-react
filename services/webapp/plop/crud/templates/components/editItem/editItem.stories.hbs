import { Story } from '@storybook/react';
import { generatePath } from 'react-router';
import { ProvidersWrapper } from '../../../shared/utils/testUtils';
import { prepareState } from '../../../mocks/store';
import { {{ camelCase name }}Factory } from '../../../mocks/factories';
import { ROUTES } from '../../../app/config/routes';
import { Edit{{ pascalCase name }} } from './edit{{ pascalCase name }}.component';

const item = {{ camelCase name }}Factory();
const store = prepareState((state) => {
  state.{{ camelCase name }}.items = [item];
});

const Template: Story = (args) => {
  return (
    <ProvidersWrapper
      context=\{{
        store,
        router: {
          url: `/en${generatePath(ROUTES.{{ camelCase name }}.edit, { id: item.id })}`,
          routePath: `/:lang${ROUTES.{{ camelCase name }}.edit}`,
        },
      }}
    >
      <Edit{{ pascalCase name }} {...args} />
    </ProvidersWrapper>
  );
};

export default {
  title: '{{ pascalCase name }} / Edit{{ pascalCase name }}',
  component: Edit{{ pascalCase name }},
};

export const Default = Template.bind({});
