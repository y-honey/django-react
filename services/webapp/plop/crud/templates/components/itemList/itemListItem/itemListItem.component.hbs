import { Link } from 'react-router-dom';
import { useDispatch } from 'react-redux';
import { FormattedMessage } from 'react-intl';
import { {{ pascalCase name }} } from '../../../../shared/services/api/{{ camelCase name }}/types';
import { ROUTES } from '../../../../app/config/routes';
import { {{ camelCase name }}Actions } from '../../../../modules/{{ camelCase name }}';
import { useGenerateLocalePath } from '../../../../shared/hooks/localePaths';
import { Container } from './{{ camelCase name }}ListItem.styles';

export type {{ pascalCase name }}ListItemProps = {
  item: {{ pascalCase name }};
}

export const {{ pascalCase name }}ListItem = ({ item }: {{ pascalCase name }}ListItemProps) => {
  const dispatch = useDispatch();
  const generateLocalePath = useGenerateLocalePath();

  const handleDelete = () => {
    dispatch({{ camelCase name }}Actions.delete{{ pascalCase name }}(item.id));
  };

  return (
    <Container>
      <Link to={generateLocalePath(ROUTES.{{ camelCase name }}.details, { id: item.id })}>{item.name}</Link>
      <Link to={generateLocalePath(ROUTES.{{ camelCase name }}.edit, { id: item.id })}>
        [<FormattedMessage id={'{{ pascalCase name }} list / edit link'} defaultMessage={'Edit'} />]
      </Link>
      <button onClick={handleDelete}>
        <FormattedMessage id={'{{ pascalCase name }} list / delete button'} defaultMessage={'Delete'} />
      </button>
    </Container>
  );
};
