stackName: "${env:PROJECT_NAME}-${self:provider.stage}-workers"

iam:
  - Effect: "Allow"
    Action:
      - "secretsmanager:GetRandomPassword"
      - "secretsmanager:CreateSecret"
      - "secretsmanager:ListSecrets"
    Resource: "*"
  - Effect: "Allow"
    Action:
      - "secretsmanager:*"
    Resource:
      { Fn::ImportValue: "${self:custom.projectEnvName}-databaseSecretArn" }
  - Effect: "Allow"
    Action:
      - "ses:SendEmail"
    Resource: "*"

envsHello:
  DB_SECRET_ARN:
    { Fn::ImportValue: "${self:custom.projectEnvName}-databaseSecretArn" }

envsSendEmail:
  EMAIL_ENABLED: "True"
  FROM_EMAIL: ${ssm:/${self:custom.ssmService}/FROM_EMAIL~true}
  WEB_APP_URL: ${ssm:/${self:custom.ssmService}/WEB_APP_URL~true}

vpcHello:
  securityGroupIds:
    - Fn::ImportValue: "${self:custom.projectEnvName}-lambdaSecurityGroupId"
  subnetIds:
    - Fn::ImportValue: "${self:custom.projectEnvName}-privateSubnetOneId"
    - Fn::ImportValue: "${self:custom.projectEnvName}-privateSubnetTwoId"
