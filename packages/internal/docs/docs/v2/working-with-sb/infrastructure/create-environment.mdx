---
title: How to create a new environment?
description: Create a new application environment on AWS
---

:::note

The steps below assume that you have properly configured and deployed basic version of the SaaS Boilerplate by
Apptension on AWS with single environment. If you don't have this configuration check following articles first:

- [configure the **AWS vault** tool for your environment](/v2/working-with-sb/infrastructure/initial-setup#aws-vault-profile)
- tutorial: [deploy fresh SaaS Boilerplate by Apptension on AWS](/v2/tutorials/deploy-to-aws)

:::

# Environments

SaaS Boilerplate by Apptension allows you to deploy multiple versions of your application. Those, for example, could be
`qa`, `staging`, `production` or whatever else you desire. You decide how to call them and how many you would like to
have. The only exception is `local`, which is a special pre-created local environment (it's needed for example for
running Serverless services locally).

This article guide you through every step that is needed to create a new environment.

## Create environment configuration file

The very first thing you need to do is to generate an environment configuration file that will describe your
environment. SaaS Boilerplate by Apptension expects such file to exist in a root directory and follow a specific naming
pattern to be able to discover it when running for example `make` rules.

Let's say you want to create an environment named `qa`. The configuration file should be named `.env.qa`.

In the root of the repository you can find a `.env.stage-example` that is a template for the configuration file of the
single environment. You can copy it, rename and replace the content:

```bash
cp .env.stage-example .env.qa
```

Follow the [API reference of the `.env`](../../api-reference/env-files) files for the details of the content.

:::info

To learn more about using `.env` files in SaaS Boilerplate by Apptension read the
[`How to work with .env files?`](../project-structure/env-files) article.

:::

## Create environment variables

Now when you have basic environment configuration, you can set all environment variables on the AWS. To do that you can
follow the steps from [`How to configure environment variables on AWS?`](./env-variables) guide and set all variables
for each of the services. You can find all used environment variables thought services in
[API Reference](../../api-reference/env).


## Deploy environment infrastructure

Now that the configuration part is done you can switch to `aws-vault` session of this new environment:

```sh
make aws-vault ENV_STAGE=qa
```

... and deploy an actual infrastructure of your app by running following command:

```shell
make deploy-env-infra
```

This command will run CDK deployment of all environment specific infrastructure components like: database, CI/CD.

When CDK finishes successfully you'll be ready to run deploy of your application's code!